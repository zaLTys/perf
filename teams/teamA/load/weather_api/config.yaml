test_name: "teamA_load_weather_api"

# Open-Meteo API - Free weather API (no authentication required)
base_url: "https://api.open-meteo.com"

# Environment overrides (optional - same API for all environments in this case)
environments:
  dev:
    base_url: "https://api.open-meteo.com"
  staging:
    base_url: "https://api.open-meteo.com"
  prod:
    base_url: "https://api.open-meteo.com"

endpoints:
  # Weather forecast endpoint
  forecast: "/v1/forecast"
  
  # Geocoding endpoint (to search for cities)
  geocoding: "/v1/search"

scenarios:
  # Ramping load test - gradually increase virtual users
  weather_load:
    executor: "ramping-vus"
    startVUs: 0
    stages:
      # Ramp up to 10 users over 30 seconds
      - duration: "30s"
        target: 10
      # Stay at 10 users for 1 minute
      - duration: "1m"
        target: 10
      # Ramp up to 20 users over 30 seconds
      - duration: "30s"
        target: 20
      # Stay at 20 users for 2 minutes
      - duration: "2m"
        target: 20
      # Ramp down to 0 users over 30 seconds
      - duration: "30s"
        target: 0

thresholds:
  # Response time thresholds
  http_req_duration:
    - "p(90)<1000"
    - "p(95)<2000"
    - "p(99)<3000"
  
  # 99% success rate
  success_rate:
    - "rate>0.99"

